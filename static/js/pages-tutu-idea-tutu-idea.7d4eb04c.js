(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-tutu-idea-tutu-idea"],{"0370":function(t,n,e){"use strict";e("7a82");var i=e("4ea4").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("a9e3"),e("ac1f"),e("00b4"),e("c975"),e("d401"),e("d3b7"),e("25f0");var a=i(e("08b8")),o={mixins:[a.default],name:"tn-number-box",props:{value:{type:Number,default:1},index:{type:[Number,String],default:""},min:{type:Number,default:0},max:{type:Number,default:99999},step:{type:Number,default:1},disabled:{type:Boolean,default:!1},disabledInput:{type:Boolean,default:!1},inputWidth:{type:Number,default:88},inputHeight:{type:Number,default:50},cursorSpacing:{type:Number,default:100},longPress:{type:Boolean,default:!0},longPressTime:{type:Number,default:250},positiveInteger:{type:Boolean,default:!0}},computed:{getCursorSpacing:function(){return Number(uni.upx2px(this.cursorSpacing))}},data:function(){return{inputValue:1,longPressTimer:null,changeFromInner:!1,innerChangeTimer:null}},watch:{value:function(t){var n=this;this.changeFromInner||(this.updateInputValue(),this.$nextTick((function(){n.changeFromInner=!1})))},inputValue:function(t,n){var e=this;if(""!==t){var i=0,a=this.$tn.test.number(t);i=a&&t>=this.min&&t<=this.max?t:n,this.positiveInteger&&(t<0||-1!==String(t).indexOf("."))&&(i=Math.floor(t),this.$nextTick((function(){e.inputValue=i}))),this.handleChange(i,"change")}},min:function(){this.updateInputValue()},max:function(){this.updateInputValue()}},created:function(){this.updateInputValue()},methods:{touchStart:function(t){var n=this;this[t](),this.longPress&&(this.longPressTimer&&(clearInterval(this.longPressTimer),this.longPressTimer=null),this.longPressTimer=setInterval((function(){n[t]()}),this.longPressTime))},clearTimer:function(){var t=this;this.$nextTick((function(){t.longPressTimer&&(clearInterval(t.longPressTimer),t.longPressTimer=null)}))},minus:function(){this.computeValue("minus")},plus:function(){this.computeValue("plus")},calcPlus:function(t,n){var e,i=0,a=0;try{i=t.toString().split(".")[1].length}catch(r){i=0}try{a=n.toString().split(".")[1].length}catch(r){a=0}e=Math.pow(10,Math.max(i,a));var o=i>=a?i:a;return((t*e+n*e)/e).toFixed(o)},calcMinus:function(t,n){var e,i=0,a=0;try{i=t.toString().split(".")[1].length}catch(r){i=0}try{a=n.toString().split(".")[1].length}catch(r){a=0}e=Math.pow(10,Math.max(i,a));var o=i>=a?i:a;return((t*e-n*e)/e).toFixed(o)},computeValue:function(t){if(uni.hideKeyboard(),!this.disabled){var n=0;"minus"===t?n=this.calcMinus(this.inputValue,this.step):"plus"===t&&(n=this.calcPlus(this.inputValue,this.step)),n<this.min||n>this.max||(this.inputValue=n,this.handleChange(n,t))}},blurInput:function(t){var n=this,e=0,i=t.detail.value;e=/(^\d+$)/.test(i)&&0!=i[0]?+i:this.min,e>this.max?e=this.max:e<this.min&&(e=this.min),this.$nextTick((function(){n.inputValue=e})),this.handleChange(e,"blur")},focusInput:function(){this.$emit("focus")},updateInputValue:function(){var t=this.value;t<=this.min?t=this.min:t>=this.max&&(t=this.max),this.inputValue=Number(t)},handleChange:function(t,n){var e=this;this.disabled||(this.innerChangeTimer&&(clearTimeout(this.innerChangeTimer),this.innerChangeTimer=null),this.changeFromInner=!0,this.innerChangeTimer=setTimeout((function(){e.changeFromInner=!1}),150),this.$emit("input",Number(t)),this.$emit(n,{value:Number(t),index:this.index}))}}};n.default=o},"08b8":function(t,n,e){e("a9e3"),t.exports={data:function(){},props:{backgroundColor:{type:String,default:""},fontColor:{type:String,default:""},fontSize:{type:Number,default:0},fontUnit:{type:String,default:"rpx"}},computed:{backgroundColorStyle:function(){return this.$tn.color.getBackgroundColorStyle(this.backgroundColor)},backgroundColorClass:function(){return this.$tn.color.getBackgroundColorInternalClass(this.backgroundColor)},fontColorStyle:function(){return this.$tn.color.getFontColorStyle(this.fontColor)},fontColorClass:function(){return this.$tn.color.getFontColorInternalClass(this.fontColor)},fontSizeStyle:function(){return this.$tn.string.getLengthUnitValue(this.fontSize,this.fontUnit)}},methods:{}}},"0c16":function(t,n,e){var i=e("24fb");n=i(!1),n.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.tn-number-box[data-v-d06f989a]{display:inline-flex;align-items:center}.tn-number-box__btn__plus[data-v-d06f989a], .tn-number-box__btn__minus[data-v-d06f989a]{width:%?60?%;display:flex;flex-direction:row;justify-content:center;align-items:center;background-color:#e6e6e6}.tn-number-box__btn__plus[data-v-d06f989a]{border-radius:0 %?8?% %?8?% 0}.tn-number-box__btn__minus[data-v-d06f989a]{border-radius:%?8?% 0 0 %?8?%}.tn-number-box__btn--disabled[data-v-d06f989a]{color:#aaa!important;background:#e6e6e6!important}.tn-number-box__input[data-v-d06f989a]{display:flex;flex-direction:row;align-items:center;justify-content:center;position:relative;text-align:center;box-sizing:border-box;padding:0 %?4?%;margin:0 %?6?%;background-color:#e6e6e6}.tn-number-box__input--disabled[data-v-d06f989a]{color:#aaa!important;background:#e6e6e6!important}',""]),t.exports=n},"13e0":function(t,n,e){var i=e("24fb");n=i(!1),n.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.content[data-v-49b45552]{height:calc(100vh - %?1?%);border-top:%?1?% solid #dadbdd;width:%?750?%;background:linear-gradient(45deg,rgba(248,213,98,.5),rgba(248,213,98,.2),#f9f7f4,rgba(248,213,98,.09803921568627451),rgba(248,213,98,.4))}.content .bg_text[data-v-49b45552]{position:absolute;text-align:left;color:rgba(233,213,175,.6);font-family:PingFang SC;font-size:%?72?%;font-style:normal;font-weight:500;line-height:normal}.content .title[data-v-49b45552]{color:#292c35;font-family:PingFang SC;font-size:%?60?%;font-style:normal;font-weight:600;line-height:normal;letter-spacing:.311px;position:absolute;height:%?198?%;margin-top:%?62?%;left:%?74?%}.content .ai_time[data-v-49b45552]{color:#292c35;font-family:PingFang SC;font-size:%?28?%;font-style:normal;font-weight:400;line-height:normal;letter-spacing:.311px;position:absolute;top:%?250?%;margin-top:%?30?%;left:%?74?%;display:flex;align-items:center}.content .ai_time .ai_time_step[data-v-49b45552]{height:%?44?%;border-radius:%?40?%;overflow:hidden;margin:0 %?12?%}.content .ai_time .ai_time_step .ai_num[data-v-49b45552]{position:relative;bottom:%?2?%}.content .ai_time .ai_time_step .ai_num[data-v-49b45552]  .tn-number-box__btn--disabled{color:#aaa!important;background:#f8edcb!important}.content .ai_time .ai_time_step .ai_num[data-v-49b45552]  .tn-number-box__btn__plus,\n.content .ai_time .ai_time_step .ai_num .tn-number-box__btn__minus[data-v-49b45552]{background:#f8edcb!important}.content .ai_time .ai_time_step .ai_num[data-v-49b45552]  .uni-input-input{background:transparent!important}.content .ai_time .ai_time_step .ai_num[data-v-49b45552]  .tn-number-box__btn__minus{background:#f8edcb!important}.content .idea_img_box[data-v-49b45552]{position:absolute;top:%?314?%;left:%?66?%}.content .idea[data-v-49b45552]{display:flex;flex-direction:row;flex-wrap:wrap}.content .idea_box[data-v-49b45552]{width:%?280?%;height:%?240?%;border-radius:%?20?%;margin-top:%?40?%}.content .idea_box[data-v-49b45552]:nth-child(even){margin-left:%?42?%}.content .idea_img[data-v-49b45552]{width:%?280?%;height:%?240?%;border-radius:%?20?%;background:#fff;box-shadow:0 0 %?80?% 0 rgba(0,0,0,.05)}.content .change[data-v-49b45552]{width:%?132?%;height:%?48?%;border-radius:%?44?%;border:%?1?% solid rgba(41,44,53,.5);color:#292c35;font-family:PingFang SC;font-size:%?24?%;font-style:normal;font-weight:400;line-height:normal;letter-spacing:.311px;display:flex;align-items:center;justify-content:center;margin:%?24?% auto 0;position:relative;right:%?38?%}.content .bottom[data-v-49b45552]{position:absolute;top:%?954?%;left:%?66?%}.content .bottom_title[data-v-49b45552]{color:#292c35;font-family:Abel;font-size:%?44?%;font-style:normal;font-weight:400;line-height:normal}.content .bottom_title .text_line[data-v-49b45552]{width:%?390?%;height:%?6?%;overflow:hidden;margin:0 %?14?%}.content .bottom_title .edit[data-v-49b45552]{width:%?44?%;height:%?44?%;position:relative;top:%?10?%}.content .place_holder[data-v-49b45552]{width:%?622?%;margin-top:%?30?%;color:#292c35;font-family:PingFang SC;font-size:%?28?%;font-style:normal;font-weight:400;line-height:normal}.content .scroll[data-v-49b45552]{height:%?164?%;\n  /* 横向布局 */white-space:nowrap;overflow:hidden;display:flex}.content .scroll .tag-row[data-v-49b45552]{width:100%;display:flex;flex-direction:row;flex-wrap:wrap}.content .scroll .tag-row .tag-item[data-v-49b45552]{width:%?300?%;height:%?48?%;display:flex;align-items:center;justify-content:space-between;background:#f3e8c7;padding:%?4?% %?12?%;margin-bottom:%?28?%}.content .scroll .tag-row .tag-item[data-v-49b45552]:nth-child(even){margin-left:4%}.content .scroll .tag-row .tag-item .tag-title[data-v-49b45552]{color:#292c35;font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:400;line-height:normal}.content .bottom_btn[data-v-49b45552]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:%?750?%;position:fixed;bottom:%?60?%;left:0}.content .bottom_btn .open_socket[data-v-49b45552]{width:%?520?%;height:%?88?%;border-radius:%?52?%;background:#292c35;color:#fefefe;display:flex;align-items:center;justify-content:center;font-family:Abel;font-size:14px;font-style:normal;font-weight:400;line-height:normal;letter-spacing:.311px}',""]),t.exports=n},2019:function(t,n,e){"use strict";var i=e("3cf5"),a=e.n(i);a.a},"2b88":function(t,n,e){"use strict";var i=e("507b"),a=e.n(i);a.a},"3cf5":function(t,n,e){var i=e("0c16");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=e("4f06").default;a("75ad54b1",i,!0,{sourceMap:!1,shadowMode:!1})},"507b":function(t,n,e){var i=e("13e0");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=e("4f06").default;a("2d520e69",i,!0,{sourceMap:!1,shadowMode:!1})},"516b":function(t,n,e){t.exports=e.p+"static/img/line.08a0e51a.svg"},"6d0b":function(t,n,e){"use strict";e.r(n);var i=e("8a05"),a=e.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(o);n["default"]=a.a},"7c3d":function(t,n,e){"use strict";e.r(n);var i=e("0370"),a=e.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(o);n["default"]=a.a},"8a05":function(t,n,e){"use strict";(function(t){e("7a82");var i=e("dbce").default,a=e("4ea4").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("d3b7"),e("6062"),e("3ca3"),e("ddb0"),e("99af"),e("a434"),e("d81d");var o=a(e("2909")),r=a(e("c7eb")),s=a(e("1da1")),l=a(e("2299")),u=i(e("2ef0")),c={data:function(){return{ideaTags:[],walkTime:1,isIdeaTags:!1,placeholderStr:"选点新的灵感，途途AI将给你推荐小众地点生成专属路线",ideaList:[]}},onLoad:function(n){var e=this;return(0,s.default)((0,r.default)().mark((function i(){var a,o;return(0,r.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.getIdeaTags();case 2:return t.log("user-tutu-idea",n),e.opt=n,a=n.userid,i.next=7,l.default.dispatch("getUserToken",+a);case 7:o=i.sent,t.log("userToken",o),uni.getSystemInfo({complete:function(n){t.log(n),e.deviceId=n.deviceId}});case 10:case"end":return i.stop()}}),i)})))()},methods:{getIdeaTags:function(){var t=this;return(0,s.default)((0,r.default)().mark((function n(){var e;return(0,r.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,l.default.dispatch("aiGetTags",{count:4,hours:t.walkTime,tag:[],tagList:1});case 2:e=n.sent,t.ideaTags=e.tags,t.isIdeaTags=t.ideaTags.length>0;case 5:case"end":return n.stop()}}),n)})))()},changeIdea:function(t){var n=(0,o.default)(new Set(this.ideaList.concat(t))),e=u.uniqBy(n,"name");this.ideaList=e},rmIdea:function(t){this.ideaList.splice(t,1)},linkAi:function(){if(this.ideaList!==[]){var n=this.ideaList.map((function(t){return t.name})).join("，");t.log(n),uni.navigateTo({url:"/pages/map/map?userLat=".concat(this.opt.userLat,"&userLang=").concat(this.opt.userLang,"&userTalk=").concat(n,"&walkTime=").concat(this.walkTime,"&type=2")})}else uni.showToast({icon:"none",title:"请选择tutu灵感"})}}};n.default=c}).call(this,e("5a52")["default"])},"979f":function(t,n,e){"use strict";e.r(n);var i=e("c29a"),a=e("7c3d");for(var o in a)["default"].indexOf(o)<0&&function(t){e.d(n,t,(function(){return a[t]}))}(o);e("2019");var r=e("f0c5"),s=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"d06f989a",null,!1,i["a"],void 0);n["default"]=s.exports},"9b25":function(t,n,e){t.exports=e.p+"static/img/tutu-edit.2534a847.svg"},c29a:function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){}));var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{staticClass:"tn-number-box-class tn-number-box"},[e("v-uni-view",{staticClass:"tn-number-box__btn__minus",class:[t.backgroundColorClass,t.fontColorClass,{"tn-number-box__btn--disabled":t.disabled||t.inputValue<=t.min}],style:{backgroundColor:t.backgroundColorStyle,height:t.$tn.string.getLengthUnitValue(t.inputHeight),color:t.fontColorStyle,fontSize:t.fontSizeStyle},on:{touchstart:function(n){n.stopPropagation(),n.preventDefault(),arguments[0]=n=t.$handleEvent(n),t.touchStart("minus")},touchend:function(n){n.stopPropagation(),n.preventDefault(),arguments[0]=n=t.$handleEvent(n),t.clearTimer.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"tn-icon-reduce"})],1),e("v-uni-input",{staticClass:"tn-number-box__input",class:[t.fontColorClass,{"tn-number-box__input--disabled":t.disabledInput||t.disabled}],style:{width:t.$tn.string.getLengthUnitValue(t.inputWidth),height:t.$tn.string.getLengthUnitValue(t.inputHeight),color:t.fontColorStyle,fontSize:t.fontSizeStyle,backgroundColor:t.backgroundColorStyle},attrs:{disabled:t.disabledInput||t.disabled,"cursor-spacing":t.getCursorSpacing},on:{blur:function(n){arguments[0]=n=t.$handleEvent(n),t.blurInput.apply(void 0,arguments)},focus:function(n){arguments[0]=n=t.$handleEvent(n),t.focusInput.apply(void 0,arguments)}},model:{value:t.inputValue,callback:function(n){t.inputValue=n},expression:"inputValue"}}),e("v-uni-view",{staticClass:"tn-number-box__btn__plus",class:[t.backgroundColorClass,t.fontColorClass,{"tn-number-box__btn--disabled":t.disabled||t.inputValue>=t.max}],style:{backgroundColor:t.backgroundColorStyle,height:t.$tn.string.getLengthUnitValue(t.inputHeight),color:t.fontColorStyle,fontSize:t.fontSizeStyle},on:{touchstart:function(n){n.stopPropagation(),n.preventDefault(),arguments[0]=n=t.$handleEvent(n),t.touchStart("plus")},touchend:function(n){n.stopPropagation(),n.preventDefault(),arguments[0]=n=t.$handleEvent(n),t.clearTimer.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"tn-icon-add"})],1)],1)},a=[]},dd51:function(t,n,e){"use strict";e.r(n);var i=e("fa9d"),a=e("6d0b");for(var o in a)["default"].indexOf(o)<0&&function(t){e.d(n,t,(function(){return a[t]}))}(o);e("2b88");var r=e("f0c5"),s=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"49b45552",null,!1,i["a"],void 0);n["default"]=s.exports},fa9d:function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){return i}));var i={tnNumberBox:e("979f").default},a=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("v-uni-view",{staticClass:"content"},[i("pre",{staticClass:"bg_text"},[t._v("strolling through every \nalley's tale")]),i("v-uni-view",{staticClass:"title"},[i("v-uni-view",[t._v("每天发现一点")]),i("v-uni-view",[t._v("不一样的街头巷尾")])],1),i("v-uni-view",{staticClass:"ai_time"},[t._v("我期待的旅行时长为"),i("v-uni-view",{staticClass:"ai_time_step"},[i("tn-number-box",{staticClass:"ai_num",attrs:{"bg-color":"#F8EDCB","text-color":"#292C35",width:"160",inputHheight:22,fontSize:12,step:1,min:1,max:8},model:{value:t.walkTime,callback:function(n){t.walkTime=n},expression:"walkTime"}})],1),t._v("小时")],1),i("v-uni-view",{staticClass:"idea_img_box"},[i("v-uni-view",{staticClass:"idea"},t._l(t.ideaTags,(function(n,e){return i("v-uni-view",{key:n.id,staticClass:"idea_box"},[i("v-uni-image",{staticClass:"idea_img",attrs:{src:n.image_url,mode:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeIdea(n)}}})],1)})),1),t.isIdeaTags?i("v-uni-view",{staticClass:"change",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.getIdeaTags.apply(void 0,arguments)}}},[t._v("换一批")]):t._e()],1),i("v-uni-view",{staticClass:"bottom"},[i("v-uni-view",{staticClass:"bottom_title"},[t._v("灵感摘录"),i("v-uni-image",{staticClass:"text_line",attrs:{src:e("516b")}}),i("v-uni-image",{staticClass:"edit",attrs:{src:e("9b25")}})],1),i("v-uni-view",[t.ideaList.length>0?i("v-uni-scroll-view",{staticClass:"scroll",attrs:{"scroll-y":!0,"show-scrollbar":!1,"enable-flex":!0}},[i("v-uni-view",{staticClass:"tag-row"},t._l(t.ideaList,(function(n,e){return i("v-uni-view",{key:e,staticClass:"tag-item"},[i("v-uni-view",{staticClass:"tag-title"},[t._v(t._s(n.name))]),i("v-uni-text",{staticClass:"tag-icon tn-icon-reduce-circle",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.rmIdea(e)}}})],1)})),1)],1):i("v-uni-view",{staticClass:"place_holder"},[t._v(t._s(t.placeholderStr))])],1)],1),i("v-uni-view",{staticClass:"bottom_btn"},[i("v-uni-view",{staticClass:"open_socket",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.linkAi.apply(void 0,arguments)}}},[t._v("规划路线")])],1)],1)},o=[]}}]);